class Paint{constructor(t,i,r){this.width=t,this.height=i,this.border=BORDER_FRAME,this.area=this.width*this.height,this.buffer=createGraphics(this.width+2*this.border,this.height+2*this.border),this.color_master=r,this.brush_size=BRUSH_SIZE,this.counter_max=70,this.counter=0,this.area_fully_painted=!1,this.create_dotty()}create_dotty(){this.dotty=createGraphics(this.width,this.height);let t=constrain(this.area/250,50,600);this.dotty.push(),this.dotty.noStroke(),this.dotty.strokeWeight(1);for(var i=0;i<t;i++)this.dotty.stroke(brightenColor(distortColor(color(this.color_master),10),70)),this.dotty.point(getRandomFromInterval(0,this.dotty.width),getRandomFromInterval(0,this.dotty.height)),this.dotty.stroke(brightenColor(color(INSIDE_COLOR),20)),this.dotty.point(getRandomFromInterval(0,this.dotty.width),getRandomFromInterval(0,this.dotty.height));this.dotty.pop()}show(t){this.loop_1=constrain(this.area/1e3,100,800),this.loop_2=constrain(this.area/250,50,400),this.paint_layer(this.loop_1,PRIMARY_STROKE_WEIGHT,5),this.paint_layer(this.loop_2,1,10),void 0!==t&&this.buffer.image(t,0,0,this.buffer.width,this.buffer.height),this.counter==this.counter_max&&(this.area_fully_painted=!0)}paint_layer(t,i,r){if(this.brush_loops=t,this.stroke_size=i,this.color_noise=r,this.counter<=this.counter_max){this.color=brightenColor(distortColor(color(this.color_master),this.color_noise),30),this.counter+=1,this.buffer.strokeWeight(this.stroke_size),this.buffer.stroke(this.color),this.buffer.noFill();let t=getRandomFromInterval(this.border,this.width+this.border),i=getRandomFromInterval(this.border,this.height+this.border);this.buffer.curveTightness(BRUSH_TIGHTNESS),this.buffer.beginShape(),this.buffer.curveVertex(t,i),this.buffer.curveVertex(t,i),this.current_x=t,this.current_y=i;for(var h=0;h<this.brush_loops;h++)fxrand()<.8?(this.current_x=constrain(this.current_x+getRandomFromInterval(-this.brush_size,this.brush_size),this.border,this.width+this.border),this.current_y=constrain(this.current_y+getRandomFromInterval(-this.brush_size,this.brush_size),this.border,this.height+this.border)):(this.current_x=constrain(this.current_x+getRandomFromInterval(-this.brush_size,this.brush_size),0,this.width+2*this.border),this.current_y=constrain(this.current_y+getRandomFromInterval(-this.brush_size,this.brush_size),0,this.height+2*this.border)),this.buffer.curveVertex(this.current_x,this.current_y);this.buffer.curveVertex(this.current_x,this.current_y),this.buffer.endShape()}this.buffer.image(this.dotty,this.border,this.border,this.dotty.width,this.dotty.height)}}